(function(e){var t={$:function(t){return e.getElementById(t)},hd:function(e){e.style.display="none"},sh:function(e){e.style.display="block"}};if(!e.querySelector){e.querySelector=function(){return null}}var i=t.$("footYYShow"),n=t.$("footYyX"),r=t.$("footYYOff"),a=t.$("footYYClose");i.onclick=function(){t.sh(n);return false};r.onclick=function(){t.hd(n);return false};a.onclick=function(){t.hd(n);return false};var o=t.$("page");t.$("backToTop").onclick=function(){e.documentElement.scrollTop=0;e.body.scrollTop=0;return false};var s=t.$("content").getElementsByTagName("img"),l=s.length;var c=[];for(var f=0;f<l;f++){if(!s[f].src){c.push({src:s[f].getAttribute("data-src"),obj:s[f]})}}if(o){var d=function(){for(var t=0;t<c.length;t++){(function(t){if(c[t].src){var i=c[t].obj.getBoundingClientRect(),n=c[t].src;if(i.top>i.top-i.bottom&&i.top<(window.innerHeight||screen.availHeight-40)){if(typeof e.webkitHidden!="undefined"&&window.Promise){var r=new Image;r.onload=function(){c[t].obj.src=n;c[t].obj.removeAttribute("data-src")};r.src=n}else{c[t].obj.src=n;c[t].obj.removeAttribute("data-src")}c[t].src=""}}})(t)}};o.onscroll=function(){d()};e.onscroll=function(){d()};d()}var u=e.querySelector(".navigation");if(u){var p=u.previousElementSibling;if(screen.width>640){if(p&&/本篇/.test(p.innerHTML)){p.innerHTML+='<span class="ins_txt">// 想要打赏？点击<a href="javascript:" id="alipayA" title="点击显示二维码">这里</a>。有话要说？点击<a href="#comment" title="点击定位到评论">这里</a>。</span>';t.$("alipayA").onclick=function(){var i=t.$("payOverlay");if(i){i.style.display="block"}else{e.body.insertAdjacentHTML("beforeEnd",'<div id="payOverlay" class="yw_overlay" onclick="this.style.display=\'none\';"><div class="alipay_support"><strong>支付宝<span style="margin:0 82px;"></span>微&nbsp;&nbsp;信</strong><div class="alipay_img"><img src="/alipay.png"> <img src="/wxpay.png"></div></div></div>')}if(window._gaq){_gaq.push(["_trackEvent","PAY","click","will overlay"])}};var v=p.previousElementSibling;if(v.className=="link"){v.insertAdjacentHTML("afterend",'<div class="link">4个月出库2万册，<a href="//www.cssworld.cn/"  target="_blank">《CSS世界》</a>签名版独家发售，<a href="javascript:" onclick="this.parentNode.style.display=\'none\';this.parentNode.nextSibling.style.display=\'\';">点击显示购买码</a></div><div class="mybook-intro" style="display:none;" title="了解本书更多信息"><a href="//www.cssworld.cn/" target="_blank"></a></div>');v.style.display="none"}}targetArticleAd=t.$("daITxz2");if(targetArticleAd){u.parentNode.insertBefore(targetArticleAd,u)}}else{if(/MicroMessenger/i.test(navigator.userAgent)&&p&&/本篇/.test(p.innerHTML)){p.className="payimg";p.innerHTML='<span>写得666！赏一下（长按识别）：</span><img src="/wxpay-24.png" width="198" height="198">'}}}if(e.querySelectorAll){var m=e.querySelectorAll('.entry > p > a[href*="zhangxinxu"]');for(var y=0;y<m.length;y++){if(m[y].parentNode.className!="link"&&!/tag/.test(m[y].href)){m[y].target="_blank"}}}var h=e.querySelector(".widget_archive");if(h){h.onclick=function(){var e=this.getAttribute("open");if(typeof e!="string"){this.setAttribute("open","open");E=_.clientHeight+_.offsetTop}}}var g=t.$("commentform"),b=t.$("submit");var T=t.$("onlyGoodCom");if(g&&T){g.onclick=function(){T.value="zhangxinxu"};if([].map){g.addEventListener("input",function(){T.value="zhangxinxu"})}}if(g&&b&&e.querySelector){var w=g.querySelector("#author"),L=g.querySelector("#email"),N=g.querySelector("#url"),S=g.querySelector("#comment");var k="placeholder";if(screen.width<640&&g.classList){g.classList.add("mobile");if(w){w.setAttribute(k,"名称(必须)")}if(L){L.setAttribute(k,"邮箱(必须)")}if(N){N.setAttribute(k,"网站(可选)")}if(S){S.setAttribute(k,"评论内容(必须)")}}b.insertAdjacentHTML("afterend",'<span id="commRem" class="ml20" style="color:#cd0000;"></span>');var H=t.$("commRem");if("".trim&&w&&L&&N&&S){g.addEventListener("submit",function(e){var t=true;if(w.value.trim()==""){H.innerHTML="名称还没填写";t=false}else if(L.value.trim()==""){H.innerHTML="邮箱还没填写";t=false}else if(S.value.trim()==""){H.innerHTML="评论内容还没填写";t=false}if(t==false){e.preventDefault();return false}H.style.color="";H.innerHTML="正在提交中..."});g.addEventListener("input",function(){H.innerHTML=""})}if(e.querySelector){var A=e.querySelector("h3.respond_title");if(A){A.innerHTML=A.innerHTML.replace(/\s+/g,"")}}var $=t.$("comments");if($&&screen.width<640&&/\d|一/.test($.innerHTML)){b.parentNode.insertAdjacentHTML("afterend",'<p class="da_no_away">//zxx: 翻过下面几座小山就能看到精彩评论</p>')}}var x=t.$("respond"),M=e.querySelector(".post");if(screen.width<640&&x&&M){x.parentNode.insertBefore(x,M.nextSibling)}var q=e.querySelector(".top_da_out"),_=t.$("sidebar");if([].map&&screen.width>640){if(q&&_){var E=_.clientHeight+_.offsetTop,j=_.offsetTop;var C=q.offsetTop-10;var Y=false;var I=function(){if(/open/.test(q.className)){q.style.position="";q.style.top="";q.style.left="";q.style.right="";return}var t=e.body.scrollTop||e.documentElement.scrollTop||0;var i=Y?1599:e.documentElement.clientWidth;if(i>=1600&&t>=C||i<1600&&t>E){q.style.position="fixed";q.style.top="10px"}else{q.style.position="";q.style.top=""}if(t>E&&i>=1600){q.style.left="auto";q.style.top="10px";q.style.right="10px"}else{q.style.left="";q.style.right=""}};e.addEventListener("scroll",I)}}var z=t.$("slideA");if(z&&q){z.addEventListener("click",function(){if(this.innerHTML=="收起"){q.className=q.className.replace(" open","");this.innerHTML="展开"}else{q.className=q.className+" open";this.style.display="none";I()}})}var B=t.$("shinkSlide"),D=t.$("page"),W=window.localStorage;if(B&&D&&screen.width<1680){B.style.display="inline";B.onclick=function(){var e=D.className,t=this.title;if(/slide_hide/.test(e)){D.className=(" "+e+" ").replace(/\s+slide_hide\s+/,"");this.title=t.replace("展开","收起");this.innerHTML="&#x25ba;";if(W){localStorage.removeItem("slideHideTime")}}else{D.className=e+" slide_hide";this.title=t.replace("收起","展开");this.innerHTML="&#x25c4;";if(W){localStorage.setItem("slideHideTime",+new Date)}}this.blur();return false}}var F=t.$("footbar");var O=function(i,n){var r=t.$(i),a=r.eleClone;if(!a){a=r.cloneNode(true);a.id=i+"Float";a.className+=" hidden";r.eleClone=a;e.body.appendChild(a);a.onmouseover=function(e){e=e||window.event;var t=e.target;if(t&&/hidden/.test(t.className)&&t.tagName.toLowerCase()=="a"){return}this.style.bottom="0px"};a.querySelector(".jsFC").addEventListener("click",function(){O(i,"out");localStorage["ad"+i]=+new Date;clearTimeout(G)});var o=e.querySelector("#"+i+"Float > a");if(o){o.setAttribute("onclick",o.getAttribute("onclick").replace("Not ",""))}}n=n||"into";if(F&&r){if(n=="into"){F.className="slideout";a.style.display="block"}else{F.className="";a.style.display="none"}}};var R=["daYideng","daITxz2","daMW","daTree"].sort(function(){return Math.random()<=.5?1:-1}),X=0;var P=false;if([].map&&screen.width>1e3){var G=null;e.addEventListener("scroll",function(){clearTimeout(G);var i=R[X];if(!i||!t.$(i)){return}var n=localStorage["ad"+i],r=e.documentElement.scrollTop||e.body.scrollTop;if(n){var a=+new Date;if(i=="adYideng"&&a-n*1<864e5*3||i!="adYideng"&&a-n*1<864e5*30){X++;return}}var o=t.$(i),s=o.offsetTop<r+window.innerHeight;var l=o.eleClone;if(l){if(s){O(i,"out")}else{O(i)}}else if(P!=true){G=setTimeout(function(){if(!s){O(i);P=true}},6e3)}})}var J=screen.width,K=t.$("qrCode");if(J>480&&K){setTimeout(function(){K.innerHTML='<img src="http://qr.liantu.com/api.php?text='+location.href+'">'},3e3)}var Q=t.$("adSlideX"),U=t.$("adIndexX");if(Q&&U){var V=U.getElementsByTagName("a");var Z=V.length;var ee=null,te=0,ie=Q.parentNode.clientWidth||336;var ne=false;var re=[5e3,5e3,5e3];var ae=function(){if(!q||/open/.test(q.className)){return}Q.style.left=-1*te*ie+"px";se()},oe=function(){ee=setTimeout(function(){te++;if(te>=Z){te=0}ae();oe()},re[te])},se=function(){for(var e=0;e<Z;e++){V[e].className="da_index_a"}if(V[te]){V[te].className="da_index_a active"}};if(screen.width>640){for(var le=0;le<Z;le++){V[le].onmouseover=function(){te=this.innerHTML*1-1;ae()}}Q.parentNode.onmouseover=function(){clearTimeout(ee)};Q.parentNode.onmouseout=function(){oe()}}oe()}var ce=t.$("iconSearch"),fe=null,de=false;if(ce&&ce.clientWidth){ce.onclick=function(){var i=this.getAttribute("href");fe=e.querySelector(i);if(fe){t.hd(this);if(!de){this.parentNode.appendChild(fe);de=true}else{t.sh(fe)}fe.querySelector("#s").focus()}return false};D&&D.addEventListener("click",function(e){var i=e.target.tagName.toLowerCase();if(i!="a"&&i!="input"&&de==true){t.hd(fe);t.sh(ce)}})}})(document);